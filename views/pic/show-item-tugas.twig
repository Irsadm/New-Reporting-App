
{% extends 'templates/default.twig' %}

{% block title %} {{ items.name }} {% endblock %}

{% block current %} Detail Tugas {% endblock %}

{% block content %}
<a class="list-group-item active main-color-bg">
    <span class="" aria-hidden="true">lihat item</span>
</a>
<div style="padding:20px; background:#fff;"class="span12">
<table class="table table-striped">
  <thead>
    <tr>
      <th>Nama</th>
      <td>{{ items.name}}</td>
    </tr>
  </thead>
  <tbody>
    <tr>
        <th>Perulangan</th>
      <td>{{ items.recurrent}}</td>
    </tr>
    <tr>
     <th>Ditugaskan untuk</th>
     {% if user == null %}
     <td>Semua Anggota Grup {{ items.group_name}}</td>
     {% else %}
     <td>{{ user }}</td>
     {% endif %}
    </tr>
    <tr>
        <th>Deskripsi</th>
      <td>{{ items.description}}</td>
    </tr>
    <tr>
        <th></th>
      <td><a href="
      #" data-toggle="modal" data-target="#edit" class="btn btn-sm btn-info" >Edit</a>
  </td>
    </tr>
  </tbody>
</table>
<div class="article-post">
    <div class="widget-content"><br>
        {% for image in items.image %}
        <img height="200px" style="max-width: 300px;"alt="Image item"
        src="{{ base_url() }}/assets/images/{{ image }}">
        {% endfor %}
        <hr style="border-top: 4px double #8c8b8b;">
        <div style="background:#F6F7F9; padding: 15px;">
            {% for comment in comment %}
            <div class="user-thumb">
                {% if comment.image != null %}
                <img width="40" height="40" src="{{ comment.image }}">
                {% endif %}
                <b> &nbsp&nbsp{{ comment.username }}</b>&nbsp&nbsp{{ comment.comment }}
                <br>
                <div style="font-size:11px">
                    {{ comment.created_at }}
                </div>
            </div>
            <hr style="border-top: 1px dashed #8c8b8b;">
            {% endfor %}
        </div>
        <div class="chat-message well">
            <form action="{{path_for('pic.post.comment')}}" method="post">
                <span class="input-box">
                    <input type="hidden" name="item_id" value="{{ items.id }}" />
                    <input type="text" name="comment" style="width:80%" id="msg-box" />
                    <button class="btn btn-success">Kirim komentar</button>
                </span>
            </form>
        </div>
    </div>
</div>
</div>
<div class="modal fade" id="edit"
 role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
                <span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>
            <h3 class="modal-title" id="lineModalLabel">Form Edit tugas</h3>
        </div>
        <div class="modal-body">

        <!-- content goes here -->
        <form  action="{{ path_for('pic.edit.item', {'id':items.id})}}"
         method="POST" enctype="multipart/form-data">
            {% if errors %}
            <div class="alert alert-danger">
                <a class="close" data-dismiss="alert" href="#">x</a>
                Form harus diisi
            </div>
            {% endif %}
            <div class="row">
                <div class="col-xs-12 col-sm-4 col-md-5">
                    <div class="form-group {{ errors.name ? 'has-error' : '' }}">
                        <label for="name">Nama :</label>
                        <input type="text" name="name" class="form-control" value="{{ items.name }}">
                        {% if errors.name %}
                        <span class="help-block">{{ errors.name | first }}</span>
                        {% endif %}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-7">
                    <div class="form-group {{ errors.description ? 'has-error' : '' }}">
                        <label for="description">Deskripsi :</label>
                        <input type="text" name="description" class="form-control" value="{{ items.description}}">
                        {% if errors.description %}
                        <span class="help-block">{{ errors.description | first }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-5 col-md-5">
                    <div class="form-group {{ errors.public ? 'has-error' : '' }}">
                        <label for="public">Privasi :</label>
                        <select class="form-control" name="public" >
                            <option value="">Pilih</option>
                            {% if items.public == 0 %}
                            <option value="0" selected>Public</option>
                            <option value="1" >Pribadi</option>
                            {% else %}
                            <option value="0">Public</option>
                            <option value="1" selected>Pribadi</option>
                            {% endif %}
                        </select>
                        {% if errors.public %}
                        <span class="help-block">{{ errors.public | first }}</span>
                        {% endif %}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-7">
                    <div class="form-group {{ errors.recurrent ? 'has-error' : '' }}">
                        <label for="recurrent">Perulangan :</label>
                        <select class="form-control" name="recurrent" value="">
                            <option value="Tanpa Perulangan">Tanpa Perulangan</option>
                            <option value="{{ items.recurrent }}" selected>{{ items.recurrent }}</option>
                            <option value="Harian">Harian</option>
                            <option value="Mingguan">Mingguan</option>
                            <option value="Bulanan">Bulanan</option>
                            <option value="Tahunan">Tahunan</option>
                        </select>
                        {% if errors.recurrent %}
                        <span class="help-block">{{ errors.recurrent | first }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-5 col-md-5">
                    <div class="form-group {{ errors.start_date ? 'has-error' : '' }}">
                        <label for="start_date">Tanggal dimulai :</label>
                        <input type="date" name="start_date"  value="{{ items.start_date}}" class="form-control">
                        <input type="hidden" name="group" value="{{ items.group_id }}">
                        {% if errors.start_date %}
                        <span class="help-block">{{ errors.start_date | first }}</span>
                        {% endif %}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-7">
                    <div class="form-group {{ errors.user_id ? 'has-error' : '' }}">
                        <label for="recurrent">Ditugaskan untuk :</label>
                        <select class="form-control" name="user_id" value="">
                            {% if user == null %}
                            <option value="null" selected >Semua Anggota</option>
                            {% for member in member %}
                            <option value="{{ member.id}}">{{ member.name}}</option>
                            {% else %}
                            <option value="null">Semua Anggota</option>
                            <option value="{{ user_data.id}}" selected>{{ user_data.name}}</option>
                            <option value="{{ member.id}}">{{ member.name}}</option>
                            {% endfor %}
                            {% endif %}
                        </select>
                        {% if errors.user_id %}
                        <span class="help-block">{{ errors.user_id | first }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-5 col-md-12">
                    <div class="form-group {{ errors.image ? 'has-error' : '' }}">
                        <label for="image">Foto :</label>
                        <div class="input-group">
                            <div class="input-group-addon">
                                <i class="fa fa-image"></i>
                            </div>
                            <input type="file" id="file" class="form-control"
                            name="image[]" placeholder="Item image">
                        </div>
                        {% if errors.image %}
                        <span class="help-block">{{errors.image | first}}</span>
                        {% endif %}<br />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="btn-group btn-group-justified" role="group" aria-label="group button">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-danger"
                         data-dismiss="modal" role="button">Tutup</button>
                    </div>
                    <div class="btn-group" role="group">
                        <button type="submit" class="btn btn-primary btn-hover-green" onClick="myFunction()">Simpan</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
  </div>
</div>
{% endblock %}
