{% extends 'admin/template/app.twig' %}
{% block title %} Admin - Group{% endblock %}
{% block current %}
    Group list
{% endblock %}
{% block content %}
<div class="panel panel-primary">
    <div class="panel-heading main-color-bg">
        <h3 class="panel-title">Daftar Grup</h3>
    </div>
    <div class="panel-body">
    <div class="col-xs-12">
    <a href="" data-toggle="modal" data-target="#squarespaceModal">
        <button class="btn btn-primary" style="border-radius:5%;">
            <i class="fa fa-users"></i> Tambah Group</button></a>
    <!-- line modal -->
<div class="modal fade" id="squarespaceModal" tabindex="-1" role="dialog"
 aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Tutup</span></button>
                <h3 class="modal-title" id="lineModalLabel">Buat Group</h3>
            </div>
            <!-- modal content -->
            <form action="{{path_for('admin.create.group')}}" method="POST">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="exampleInputEmail1">Nama</label>
                        <input type="text" name="name" class="form-control" placeholder="Nama grup">
                    </div>
                    <div class="form-group">
                        <label for="exampleTextarea">Deskripsi</label>
                        <textarea name="description" class="form-control" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="btn-group btn-group-justified" role="group" aria-label="group button">
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-danger"
                            data-dismiss="modal" role="button">Tutup</button>
                        </div>
                        <div class="btn-group" role="group">
                            <button type="submit" class="btn btn-success btn-hover-green" >Buat</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
      <div class="table-responsive">
    <br>
        <table  class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>No</th>
              <th>Nama</th>
              <th>Deskripsi</th>
              <th class="col-md-2">Tindakan</th>
            </tr>
          </thead>
          <tbody>
            {% for key, group in data %}
            {% set i = i + 1 %}
            <tr>
                <td>{{ (pagination.current - 1) * pagination.perpage + (key + 1) }}</td>
                <td>
                    <a href="" data-toggle="modal" data-target="#edit{{group.id}}" style="color:#179FFC"
                     data-toggle="tooltip" data-placement="top" title="Update">
                      {{ group.name }}</a> </td>
                <td> {{ group.description }} </td>
                <td>
                <center>
                <a data-toggle="modal" data-target="#delete{{group.id}}" href="" style="color:red"
                 data-toggle="tooltip" data-placement="top" title="Hapus grup">
                    <i class="fa fa-trash"></i></a>&nbsp&nbsp&nbsp
                <a href=" {{path_for('admin.group.member', {'id':group.id})}}"
                 style="color:green" data-toggle="tooltip" data-placement="top" title="Lihat anggota">
                    <i class="fa fa-users"></i></a>
                </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
      <!--end of .table-responsive-->
      <nav aria-label="...">
          <ul class="pager">
              {% if pagination.current > pagination.first_page %}
              <li class="previous"><a href="{{ base_url() }}/admin/user?page={{ pagination.first_page }}" title="halaman pertama">
                  <i class="fa fa-fast-backward" aria-hidden="true"></i> {{ pagination.first_page }}</a></li>
              <li class=""><a href="{{ base_url() }}/admin/user?page={{ pagination.current - 1 }}" title="halaman sebelumnya">
                  <i class="fa fa-backward" aria-hidden="true"></i> {{ pagination.current - 1 }}</a></li>
              {% endif %}
              <li class=""><a>{{ pagination.current }}</a></li>
              {% if pagination.current < pagination.total_page %}
              <li class=""><a href="{{ base_url() }}/admin/user?page={{ pagination.current + 1 }}" title="halaman selanjutnya">
                  {{ pagination.current + 1 }} <i class="fa fa-forward" aria-hidden="true"></i></a></li>
              <li class="next"><a href="{{ base_url() }}/admin/user?page={{ pagination.total_page }}" title="halaman terakhir">
                  {{ pagination.total_page }} <i class="fa fa-fast-forward" aria-hidden="true"></i></a></li>
              {% endif %}
          </ul>
      </nav>
  </div>
  </div>
</div>

{% for group in data %}

<!-- Delete Group -->
<div class="modal fade" id="delete{{group.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="exampleModalLabel">Hapus Grup</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Apakah anda yakin akan menghapus {{group.name}}?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
        <a class="btn btn-danger" href="{{path_for('admin.delete.group', {'id':group.id})}}" style="color:"
        data-toggle="tooltip" data-placement="top" title="delete">Hapus {{group.name}}
    </a>
      </div>
    </div>
  </div>
</div>

<!-- Edit Group -->
<div class="modal fade" id="edit{{group.id}}" tabindex="-1" role="dialog"
 aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
                <span aria-hidden="true">×</span><span class="sr-only">Tutup</span></button>
            <h3 class="modal-title" id="lineModalLabel">Info Group</h3>
        </div>

        <!-- modal content -->
        <form action="{{path_for('admin.update.group')}}" method="POST" enctype="multipart/form-data">
            <div class="modal-body">
                <div class="form-group {{ errors.image ? 'has-error' : '' }}">
                    <div id="image_preview" align="center"><img id="previewing"
                        src="{{ base_url() }}/assets/images/{{ group.image }}"
                        class="img-thumbnail" style="width:200px">
                    </div>
                    <label>Pilih foto :</label>
                    <div class="input-group">
                        <div class="input-group-addon">
                            <i class="fa fa-image"></i>
                        </div>
                        <input type="file" id="file" class="form-control"
                        name="image" placeholder="Foto grup">
                    </div>
                    {% if errors.image %}
                    <span class="help-block">{{errors.image | first}}</span>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail1">Nama</label>
                    <input type="text" name="name" class="form-control" placeholder="Nama grup" value="{{group.name}}">
                    <input type="hidden" name="group_id" value="{{group.id}}">
                </div>
                <div class="form-group">
                    <label for="exampleTextarea">Deskripsi</label>
                    <textarea name="description" class="form-control" rows="3">{{group.description}}</textarea>
                </div>
            </div>
            <div class="modal-footer">
                <div class="btn-group btn-group-justified" role="group" aria-label="group button">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-danger"
                        data-dismiss="modal" role="button">Tutup</button>
                    </div>
                    <div class="btn-group" role="group">
                        <button type="submit" class="btn btn-success btn-hover-green">Simpan perubahan</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
</div>
{% endfor %}

{% endblock %}
