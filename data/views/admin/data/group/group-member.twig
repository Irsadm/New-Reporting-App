{% extends 'admin/template/app.twig' %}
{% block title %} Admin - Member {{group.name}} {% endblock %}
{% block current %}
    {{group.name}} > Member
{% endblock %}
{% block content %}
<div class="panel panel-primary">
    <div class="panel-heading main-color-bg">
        <h3 class="panel-title">Group member list</h3>
    </div>
    <div class="panel-body">
    <div class="col-xs-12">
        <table  class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>No</th>
              <th>Nama</th>
              <th>Jenis Kelamin</th>
              <th>Email</th>
              <th class="col-md-1">Status</th>
              <th class="col-md-1">Option</th>
            </tr>
          </thead>
          <tbody>
            {% for key, member in data %}
            <tr>
                <td>{{ (pagination.current - 1) * pagination.perpage + (key + 1) }}</td>
                <td>
                <a href="" data-toggle="modal" data-target="#{{member.id}}" style="color:green" value="{{member.id}}" title="Lihat detail">
                {{ member.name }} </a></td>
                <td> {{ member.gender }} </td>
                <td> {{ member.email }} </td>
                <td>
                {% if member.status_member == 0 %}
                    <center><span class="label label-info" style="border-radius:10%">Anggota</span></center>
                {% elseif member.status_member == 1 %}
                    <center><span class="label label-primary" style="border-radius:10%">PIC</span></center>
                {% elseif member.status_member == 2 %}
                    <center><span class="label label-success" style="border-radius:10%">Wali</span></center>
                {% endif %}
                </td>
                <td>
                    <a data-toggle="modal" data-target="#delete{{member.id}}" href="" style="color:red"
                     data-toggle="tooltip" data-placement="top" title="hapus"><i class="fa fa-times"></i></a>
                    <!-- <a href="{{path_for('web.pic.set.status', {'id':member.id, 'group':group_id})}}"
                     data-toggle="tooltip" data-placement="top" title="Set PIC"><i class="fa fa-user-secret"></i></a>
                    <a href="{{path_for('web.pic.set.as.member', {'id':member.id, 'group':group_id})}}"
                     data-toggle="tooltip" data-placement="top" title="Set sebagai member"><i class="fa fa-user-o"></i></a> -->
                </td>
            </tr>
      {% endfor %}
  </tbody>
  </table>
</div>

{% if data == null %}
<center><h4>Tidak ada data</h4></center><hr>
{% else %}
<nav aria-label="...">
    <ul class="pager">
        <div class="pagination">
                {% if pagination.current > 1 %}
                <li><a href="{{ base_url() }}/admin/group/{{group_id}}/members?page={{ pagination.current - 1 }}">
                    Sebelumnya</a></li>
                {% endif %}
                <li class="active"> <a>{{ pagination.current }}</a></li>
                {% if pagination.current < pagination.total_page %}
                <li><a href="{{ base_url() }}/admin/group/{{group_id}}/members?page={{ pagination.current + 1 }}">
                    Selanjutnya</a></li>
                    {% endif %}
            </div>
        </ul>
    </nav>
    {% endif %}
</div>
</div>

<!-- line modal -->
{% for member in data %}
<div class="modal fade" id="{{member.id}}" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
                <span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>
                <h3 class="modal-title" id="lineModalLabel">Detail User Member Group</h3>
            </div>
            <div class="modal-body">

                <!-- modal content -->
                {% if member.image != null %}
                <center><img width="30%" alt="User"
                    src="{{ base_url() }}/assets/images/{{ member.image }}"
                    onerror=this.src="{{ base_url() }}/assets/images/avatar.png"></center>
                {% else %}
                <center><img width="30%" alt="User"
                    src="{{ base_url() }}/assets/images/avatar.png"></center>
                {% endif %}
                <br>
                <span class="span2"><b> Nama </span>:</b>
                {{member.name}}<br>
                <span class="span2"><b> Username </span>:</b>
                {{member.username}} <br>
                <span class="span2"><b> Jenis Kelamin </span>:</b>
                {{member.gender}} <br>
                <span class="span2"><b> Email </span>:</b>
                {{member.email}} <br>
                <span class="span2"><b> Nomor Telepon </span>:</b>
                {{member.phone}} <br>
                <span class="span2"><b> Alamat </span>:</b>
                {{member.address}} <hr>
            </div>
        </div>
    </div>
</div>

<!-- Delete Member -->
<div class="modal fade" id="delete{{member.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="exampleModalLabel">Hapus Member</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Apakah anda yakin akan mengeluarkan <b>{{member.username}}</b> dari <b>{{group.name}}</b>?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
        <a class="btn btn-danger" href="{{path_for('admin.delete.member', {'user':member.id})}}" style="color:"
        data-toggle="tooltip" data-placement="top" title="delete">Keluarkan {{member.username}}
    </a>
      </div>
    </div>
  </div>
</div>

{% endfor %}

{% endblock %}
